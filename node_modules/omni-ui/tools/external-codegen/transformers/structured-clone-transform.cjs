module.exports = function (file, api, options) {
  const j = api.jscodeshift;

  return j(file.source)
    .find(j.ImportDeclaration)
    .forEach(path => {
      let importDec = path.value;
      if (importDec.source.value === "omni-ui") {
        let checkIndex = -1;
        if (importDec.specifiers.length === 1 && importDec.specifiers[0].imported.name === "structuredClone") {
          j(path).remove();
        } else {
          importDec.specifiers.forEach((importedStr, index) => {
            if (importedStr.imported.name === "structuredClone") {
              checkIndex = index;
            }
          });
          if (checkIndex > -1) {
            path.value.specifiers.splice(checkIndex, 1);
          }
        }
      }
    })
    .toSource();
};
